use clap::{Args, Parser};                                                                       
use std::sync::atomic::{AtomicU32, Ordering};                                                   
                                                                                                
// TODO create a bridge between implemenmtation and command enums to handle what todo with tasks
                                                                                                
//this is the structure that will handle user input                                             
#[derive(Debug, Parser)]                                                                        
#[command(author, version, about)]                                                              
struct Cli {                                                                                    
    #[command(subcommand)]                                                                      
    pub command: Command,                                                                       
}                                                                                               
                                                                                                
pub enum Command {                                                                              
    Add(),                                                                                      
    List(),                                                                                     
    Delete(),                                                                                   
    Done(),                                                                                     
}                                                                                               
                                                                                                
struct Task {                                                                                   
    id: u32,                                                                                    
    title: String,                                                                              
    done: bool,                                                                                 
}                                                                                               
                                                                                                
static NEXT_ID: AtomicU32 = AtomicU32::new(1);                                                  
                                                                                                
struct Tasks {                                                                                  
    tasks: Vec<Task>,                                                                           
}                                                                                               
                                                                                                
impl Task {                                                                                     
    // Task Constructor                                                                         
    fn new(title: &str) -> Task {                                                               
        Task {                                                                                  
            id: NEXT_ID.fetch_add(1, Ordering::SeqCst),                             
            title: String::from(title),                                                         
            done: false,                                                                        
        }                                                                                       
    }                                                                                           
                                                                                                
    fn done(&mut self) {                                                                        
        self.done = true                                                                        
    }                                                                                           
}                                                                                               
                                                                                                
impl Tasks {                                                                                    
    fn new() -> Tasks {                                                                         
        Tasks { tasks: Vec::new() }                                                             
    }                                                                                           
                                                                                                
    //Adds task to list                                                                         
    fn add_task(&mut self, title: &str) {                                                       
        self.tasks.push(Task::new(title))                                                       
    }                                                                                           
                                                                                                
    fn clear(self: Tasks) {}                                                                    
}                                                                                               
